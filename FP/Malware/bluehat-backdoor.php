<?php
define('VERSION', '1.0');

function sanitize_text($text) {
    return htmlspecialchars($text, ENT_QUOTES, 'UTF-8');
}

$dir = @getcwd();
$OS = @PHP_OS;
$free = disk_free_space($dir); 
if ($free === FALSE || $free < 0) { $free = 0; }

function view_size($size) { 
    if (!is_numeric($size)) { return "Unknown"; }
    elseif ($size >= 1073741824) { return round($size/1073741824, 2) ." GB"; }
    elseif ($size >= 1048576) { return round($size/1048576, 2) ." MB"; }
    elseif ($size >= 1024) { return round($size/1024, 2) ." KB"; }
    else { return $size . " B"; }
}

?>
<html>
<head>
    <title>Server Information</title>
</head>
<body>
    <h1>Secure Server Info v<?php echo VERSION; ?></h1>
    <p><b>Current Directory:</b> <?php echo sanitize_text($dir); ?></p>
    <p><b>Operating System:</b> <?php echo sanitize_text($OS); ?></p>
    <p><b>Available Disk Space:</b> <?php echo view_size($free); ?></p>
    <hr>
    <p> security.</p>
</body>
</html>
